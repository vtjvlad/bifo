<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест мега-меню - BIFO</title>
    <link rel="icon" href="images/bifo-logo.png" type="image/png">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Common CSS -->
    <link rel="stylesheet" href="css/common.css">
    <!-- Mega Menu CSS -->
    <link rel="stylesheet" href="css/mega-menu.css">
    <!-- Mega Menu Positioning CSS -->
    <link rel="stylesheet" href="css/mega-menu-positioning.css">
    
    <style>
        .test-content {
            min-height: 150vh;
            padding: 2rem;
        }
        
        .status-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 0.5rem;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 1060;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="/">
                <img src="/images/bifo-logo.png" alt="BIFO" height="40" class="me-2">
                <span class="fw-bold">BIFO</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Catalogs Button -->
                <div class="navbar-nav me-3">
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle catalogs-btn" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-th-large me-1"></i>Каталоги товаров
                        </a>
                        <div class="dropdown-menu mega-menu" id="megaMenu">
                            <div class="container">
                                <div class="row" id="megaMenuContent">
                                    <!-- Тестовый контент мега меню -->
                                    <div class="col-md-4">
                                        <div class="catalog-section">
                                            <h5 class="catalog-title">
                                                <a href="#" class="text-decoration-none">
                                                    <i class="fas fa-military me-2"></i>Военное снаряжение
                                                </a>
                                            </h5>
                                            <ul class="catalog-groups list-unstyled">
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Бронежилеты</a>
                                                    <ul class="catalog-categories list-unstyled">
                                                        <li><a href="#" class="text-decoration-none small">Легкие</a></li>
                                                        <li><a href="#" class="text-decoration-none small">Средние</a></li>
                                                        <li><a href="#" class="text-decoration-none small">Тяжелые</a></li>
                                                    </ul>
                                                </li>
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Каски</a>
                                                </li>
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Разгрузки</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="catalog-section">
                                            <h5 class="catalog-title">
                                                <a href="#" class="text-decoration-none">
                                                    <i class="fas fa-heart me-2"></i>Интимные товары
                                                </a>
                                            </h5>
                                            <ul class="catalog-groups list-unstyled">
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Игрушки</a>
                                                </li>
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Смазки</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="catalog-section">
                                            <h5 class="catalog-title">
                                                <a href="#" class="text-decoration-none">
                                                    <i class="fas fa-tools me-2"></i>Инструменты
                                                </a>
                                            </h5>
                                            <ul class="catalog-groups list-unstyled">
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Ручные</a>
                                                </li>
                                                <li class="catalog-group">
                                                    <a href="#" class="text-decoration-none">Электроинструменты</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <form class="d-flex mx-auto search-bar" style="max-width: 500px;">
                    <div class="input-group">
                        <input class="form-control" type="search" id="searchInput" placeholder="Поиск товаров..." aria-label="Search">
                        <button class="btn btn-outline-light" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
                
                <!-- Navigation -->
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/catalog.html">Каталог</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Status Indicator -->
    <div class="status-indicator" id="statusIndicator">
        Статус: <span id="statusText">Ожидание</span>
    </div>

    <!-- Main Content -->
    <main class="mt-5 pt-4">
        <div class="container">
            <div class="test-content">
                <h1 class="mb-4">
                    <i class="fas fa-test-tube me-2"></i>
                    Тест исправлений мега-меню
                </h1>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Проверьте:</strong>
                    <ul class="mb-0 mt-2">
                        <li>Мега-меню должно открываться в правильной позиции</li>
                        <li>Не должно выходить за границы экрана</li>
                        <li>Должна работать прокрутка контента</li>
                        <li>При прокрутке страницы вниз меню должно позиционироваться сверху</li>
                    </ul>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Тестовая секция 1</h5>
                                <p class="card-text">Этот контент добавляет высоту странице для тестирования позиционирования мега-меню при прокрутке.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Тестовая секция 2</h5>
                                <p class="card-text">Прокрутите страницу вниз и попробуйте открыть мега-меню снова.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Дополнительный контент</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Простой скрипт для отслеживания статуса
        document.addEventListener('DOMContentLoaded', function() {
            const megaMenu = document.querySelector('.mega-menu');
            const catalogsBtn = document.querySelector('.catalogs-btn');
            const statusText = document.getElementById('statusText');
            
            catalogsBtn.addEventListener('shown.bs.dropdown', function() {
                statusText.textContent = 'Открыто';
                statusText.style.color = '#28a745';
            });
            
            catalogsBtn.addEventListener('hidden.bs.dropdown', function() {
                statusText.textContent = 'Закрыто';
                statusText.style.color = '#dc3545';
            });
            
            // Проверяем позицию меню
            function checkMenuPosition() {
                if (megaMenu.classList.contains('show')) {
                    const rect = megaMenu.getBoundingClientRect();
                    const viewportWidth = window.innerWidth;
                    const viewportHeight = window.innerHeight;
                    
                    if (rect.left < 0 || rect.right > viewportWidth) {
                        statusText.textContent = 'Ошибка: выходит за границы по горизонтали';
                        statusText.style.color = '#ffc107';
                    } else if (rect.bottom > viewportHeight) {
                        statusText.textContent = 'Ошибка: выходит за границы по вертикали';
                        statusText.style.color = '#ffc107';
                    } else {
                        statusText.textContent = 'Позиция корректна';
                        statusText.style.color = '#28a745';
                    }
                }
            }
            
            window.addEventListener('resize', checkMenuPosition);
            window.addEventListener('scroll', checkMenuPosition);
        });
    </script>
</body>
</html> 