# Страница категорий товаров - Руководство

## Обзор

Создана новая функциональность для отображения товаров по категориям на отдельных страницах вместо модальных окон.

## Что было создано

### 1. API маршрут для получения товаров по категории
**Файл:** `routes/products.js`
**Маршрут:** `GET /api/products/catalog/:catalogSlug/group/:groupSlug/category/:categorySlug`

**Параметры:**
- `catalogSlug` - slug основного каталога
- `groupSlug` - slug группы
- `categorySlug` - slug категории

**Query параметры:**
- `page` - номер страницы (по умолчанию: 1)
- `limit` - количество товаров на странице (по умолчанию: 12)
- `sort` - поле для сортировки (по умолчанию: createdAt)
- `order` - порядок сортировки (asc/desc, по умолчанию: desc)
- `minPrice` - минимальная цена
- `maxPrice` - максимальная цена
- `isPromo` - только акционные товары (true/false)

**Пример запроса:**
```
GET /api/products/catalog/computer/group/laptop-notebook/category/noutbuki?page=1&limit=12&sort=currentPrice&order=asc&minPrice=10000&maxPrice=100000
```

### 2. HTML страница категории
**Файл:** `public/category.html`

**Функциональность:**
- Хлебные крошки для навигации
- Боковая панель с фильтрами:
  - Фильтр по цене (от/до)
  - Фильтр акционных товаров
  - Сортировка (по дате, цене, названию)
- Сетка товаров с двумя режимами просмотра (сетка/список)
- Пагинация
- Состояния загрузки и пустого списка

### 3. JavaScript функциональность
**Файл:** `public/js/category.js`

**Класс:** `CategoryPage`

**Основные методы:**
- `init()` - инициализация страницы
- `loadProducts()` - загрузка товаров
- `applyFilters()` - применение фильтров
- `setViewMode()` - переключение режима просмотра
- `renderProducts()` - отображение товаров
- `renderPagination()` - отображение пагинации

### 4. CSS стили
**Файл:** `public/css/style.css`

Добавлены стили для:
- Карточек товаров
- Фильтров
- Пагинации
- Адаптивного дизайна
- Анимаций

### 5. Обновления в основном приложении
**Файл:** `public/js/app.js`

- Метод `showCategory()` теперь перенаправляет на страницу категории
- Все ссылки на категории в мега-меню и каталоге обновлены

### 6. Серверные маршруты
**Файл:** `server.js`

Добавлен маршрут для обслуживания страницы категории:
```javascript
app.get('/category.html', (req, res) => {
    res.sendFile(path.join(__dirname, 'public', 'category.html'));
});
```

## Как использовать

### 1. Переход на страницу категории
Ссылки на категории теперь ведут на отдельную страницу:
```
/category.html?catalog=computer&group=laptop-notebook&category=noutbuki
```

### 2. Фильтрация товаров
- Введите минимальную и максимальную цену
- Отметьте "Только акционные товары"
- Выберите сортировку
- Нажмите "Применить фильтры"

### 3. Просмотр товаров
- Переключайтесь между режимами "Сетка" и "Список"
- Используйте пагинацию для навигации по страницам
- Добавляйте товары в корзину

### 4. Навигация
- Хлебные крошки показывают путь: Главная > Каталоги > Каталог > Группа > Категория
- Кнопка "Вернуться к каталогу" для возврата

## Структура URL

```
/category.html?catalog={catalogSlug}&group={groupSlug}&category={categorySlug}
```

**Примеры:**
- `/category.html?catalog=computer&group=laptop-notebook&category=noutbuki`
- `/category.html?catalog=dom&group=mebel&category=stoly`
- `/category.html?catalog=sport&group=fitness&category=trenazhery`

## Тестирование

### 1. Запуск сервера
```bash
npm start
```

### 2. Проверка API
```bash
curl "http://localhost:3000/api/products/catalog/computer/group/laptop-notebook/category/noutbuki"
```

### 3. Проверка страницы
Откройте в браузере:
```
http://localhost:3000/category.html?catalog=computer&group=laptop-notebook&category=noutbuki
```

## Особенности реализации

### 1. Адаптивный дизайн
- Мобильная версия с упрощенной навигацией
- Адаптивная сетка товаров
- Оптимизированные изображения

### 2. Производительность
- Ленивая загрузка изображений
- Пагинация для больших списков
- Кэширование API запросов

### 3. UX/UI
- Состояния загрузки
- Пустые состояния
- Плавные анимации
- Интуитивная навигация

### 4. SEO
- Семантическая разметка
- Мета-теги
- Хлебные крошки
- ЧПУ (человекопонятные URL)

## Возможные улучшения

1. **Дополнительные фильтры:**
   - Фильтр по производителю
   - Фильтр по рейтингу
   - Фильтр по наличию

2. **Расширенная сортировка:**
   - По популярности
   - По отзывам
   - По дате добавления

3. **Функциональность:**
   - Сравнение товаров
   - Избранное
   - Быстрый просмотр

4. **Оптимизация:**
   - Виртуализация списка для больших каталогов
   - Предзагрузка изображений
   - Service Worker для кэширования

## Поддержка

При возникновении проблем:
1. Проверьте консоль браузера на ошибки
2. Убедитесь, что сервер запущен
3. Проверьте подключение к базе данных
4. Убедитесь, что все файлы загружены корректно 